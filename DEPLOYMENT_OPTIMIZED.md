# üöÄ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–µ–ø–ª–æ–π –¥–ª—è —Å–ª–∞–±–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

## üìã –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–µ–ø–ª–æ—è

–í–º–µ—Å—Ç–æ —Å–±–æ—Ä–∫–∏ –Ω–∞ —Å–ª–∞–±–æ–º —Å–µ—Ä–≤–µ—Ä–µ (512MB RAM, 1 CPU), –º—ã:

1. **–°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ** (–Ω–∞ –º–æ—â–Ω–æ–π –º–∞—à–∏–Ω–µ)
2. **–ü—É—à–∏–º –≤ GitHub Container Registry (ghcr.io)**
3. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ç–æ–ª—å–∫–æ `docker pull` + `docker-compose up`**

## üîß –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∏ –ø—É—à

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –õ–æ–≥–∏–Ω–∏–º—Å—è –≤ GitHub Container Registry
echo $GITHUB_TOKEN | docker login ghcr.io -u $GITHUB_USERNAME --password-stdin

# –ò–ª–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
docker login ghcr.io
```

### 2. –°–±–æ—Ä–∫–∞ –∏ –ø—É—à

```bash
# –°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –ø—É—à–∏–º –≤ registry
./build-and-push.sh
```

## üñ•Ô∏è –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç

```bash
git clone https://github.com/oleksandrboicenko/tattoo-server.git
cd tattoo-server
```

### 2. –ó–∞–ø—É—Å–∫–∞–µ–º –¥–µ–ø–ª–æ–π

```bash
# –¢–æ–ª—å–∫–æ pull –æ–±—Ä–∞–∑–∞ –∏ –∑–∞–ø—É—Å–∫ (–ë–ï–ó —Å–±–æ—Ä–∫–∏!)
./deploy-server.sh
```

## üìä –≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

### ‚ùå –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):

- `npm ci` - –æ—á–µ–Ω—å —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–æ
- `npm run build` - –º–æ–∂–µ—Ç —É—Ä–æ–Ω–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
- –û–±—â–µ–µ –≤—Ä–µ–º—è: 2-5 –º–∏–Ω—É—Ç
- –†–∏—Å–∫ –ø–∞–¥–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞: **–í–´–°–û–ö–ò–ô**

### ‚úÖ –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (–ª–æ–∫–∞–ª—å–Ω–æ + registry):

- **–°–±–æ—Ä–∫–∞:** 0% —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
- **–î–µ–ø–ª–æ–π:** —Ç–æ–ª—å–∫–æ `docker pull` + –∑–∞–ø—É—Å–∫
- –û–±—â–µ–µ –≤—Ä–µ–º—è: 30-60 —Å–µ–∫—É–Ω–¥
- –†–∏—Å–∫ –ø–∞–¥–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞: **–ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ô**

## üê≥ Docker –æ–±—Ä–∞–∑—ã

### Registry

- **Backend:** `ghcr.io/oleksandrboicenko/tattoo-server:latest`
- **Database:** `postgres:15-alpine` (–∏–∑ Docker Hub)
- **Frontend:** `node:22-alpine` (–∏–∑ Docker Hub)
- **Nginx:** `nginx:alpine` (–∏–∑ Docker Hub)

### –†–∞–∑–º–µ—Ä—ã –æ–±—Ä–∞–∑–æ–≤

- **Backend:** ~200-300MB
- **Database:** ~200MB
- **Frontend:** ~100MB
- **Nginx:** ~50MB

## üîÑ Workflow –¥–µ–ø–ª–æ—è

```mermaid
graph LR
    A[–õ–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞] --> B[–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞]
    B --> C[–ü—É—à –≤ ghcr.io]
    C --> D[–°–µ—Ä–≤–µ—Ä]
    D --> E[docker pull]
    E --> F[docker-compose up]
```

## üö® Troubleshooting

### –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ registry

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–∫–µ–Ω
echo $GITHUB_TOKEN

# –õ–æ–≥–∏–Ω–∏–º—Å—è –∑–∞–Ω–æ–≤–æ
docker login ghcr.io
```

### –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞–∑–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
docker pull ghcr.io/oleksandrboicenko/tattoo-server:latest

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ registry
```

### –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
docker-compose -f docker-compose.prod.yml ps
```

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–°–µ—Ä–≤–µ—Ä –Ω–µ –ø–∞–¥–∞–µ—Ç** –æ—Ç —Å–±–æ—Ä–∫–∏
2. **–ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π** (30-60 —Å–µ–∫ –≤–º–µ—Å—Ç–æ 2-5 –º–∏–Ω)
3. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –æ–±—Ä–∞–∑ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
5. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
