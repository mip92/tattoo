#!/bin/bash
# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
if [ -f "docker-hub.env" ]; then
    source docker-hub.env
else
    echo "‚ö†Ô∏è  –§–∞–π–ª docker-hub.env –Ω–µ –Ω–∞–π–¥–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é."
    SERVER_IP="164.92.133.111"
    SERVER_USER="root"
    SSH_KEY_PATH="~/.ssh/id_ed25519"
fi

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä—É
echo "üöÄ –ü–æ–¥–∫–ª—é—á–∞—é—Å—å –∫ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä—É..."
echo "üìç –°–µ—Ä–≤–µ—Ä: $SERVER_IP"
echo "üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: $SERVER_USER"
echo "üîë –ö–ª—é—á: $SSH_KEY_PATH"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ SSH –∫–ª—é—á–∞
if [ ! -f $SSH_KEY_PATH ]; then
    echo "‚ùå SSH –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω: $SSH_KEY_PATH"
    echo "–°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á –∫–æ–º–∞–Ω–¥–æ–π: ssh-keygen -t ed25519"
    exit 1
fi

echo "‚úÖ SSH –∫–ª—é—á –Ω–∞–π–¥–µ–Ω"
echo "üîå –ü–æ–¥–∫–ª—é—á–∞—é—Å—å..."
echo ""

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh -i $SSH_KEY_PATH $SERVER_USER@$SERVER_IP
